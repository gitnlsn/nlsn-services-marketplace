<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles.css">
    <title>Booking Confirmation Screen - Frontend</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; margin: 0; background-color: #f5f7fa; color: #333; }
        .container { max-width: 1000px; margin: 40px auto; background: #fff; padding: 40px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.07); }
        .back-link { display: inline-flex; align-items: center; gap: 8px; color: #0056b3; text-decoration: none; margin-bottom: 24px; font-size: 14px; transition: all 0.2s; }
        .back-link:hover { gap: 12px; color: #004494; }
        h1 { color: #0056b3; margin-bottom: 8px; font-size: 32px; }
        h2 { color: #2c3e50; margin-top: 32px; margin-bottom: 16px; font-size: 24px; }
        h3 { color: #34495e; margin-top: 24px; margin-bottom: 12px; font-size: 18px; }
        
        .description { background: linear-gradient(135deg, #f8f9fa 0%, #e7f3ff 100%); padding: 24px; border-radius: 12px; margin: 24px 0; border-left: 4px solid #0056b3; }
        .description p { margin: 8px 0; }
        .description strong { color: #0056b3; }
        
        .section-card { background: #fff; border: 1px solid #e1e8ed; border-radius: 12px; padding: 24px; margin: 20px 0; transition: all 0.3s; }
        .section-card:hover { box-shadow: 0 6px 12px rgba(0,0,0,0.08); transform: translateY(-2px); }
        
        .ui-elements { background: #e7f3ff; }
        .api-calls { background: #fff3cd; }
        
        pre.mermaid { background: #f8f9fa; border: 2px solid #dee2e6; padding: 24px; border-radius: 12px; overflow-x: auto; margin: 24px 0; }
        
        ul { padding-left: 24px; }
        li { margin: 8px 0; }
        li strong { color: #2c3e50; }
        
        code { background: #f8f9fa; padding: 2px 6px; border-radius: 4px; font-family: 'Monaco', 'Consolas', monospace; font-size: 14px; color: #d73a49; }
        
        .responsive-section { background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 16px 0; }
        .responsive-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">← Back to Frontend Screens</a>
        
        <h1>Booking Confirmation Screen</h1>
        
        <div class="description">
            <h2>Description</h2>
            <p>The Booking Confirmation Screen serves as the final review step before payment processing. It displays a comprehensive summary of the selected service, appointment details, pricing breakdown, and any special instructions. This screen allows users to verify all booking information and make last-minute adjustments before committing to the purchase.</p>
            <p><strong>Primary Purpose:</strong> Provide a clear summary of the booking details, build trust through transparency, and give users a final opportunity to review and modify their selection before payment.</p>
        </div>

        <div class="section-card ui-elements">
            <h2>UI Elements</h2>
            <ul>
                <li><strong>Progress Indicator:</strong> Shows current step in booking process (Review → Payment → Confirmation)</li>
                <li><strong>Service Summary Card:</strong>
                    <ul>
                        <li>Service thumbnail image</li>
                        <li>Service title and description</li>
                        <li>Professional name and photo</li>
                        <li>"Edit Service" link</li>
                    </ul>
                </li>
                <li><strong>Appointment Details:</strong>
                    <ul>
                        <li>Selected date and time</li>
                        <li>Duration estimate</li>
                        <li>Service location/address</li>
                        <li>"Change Date/Time" button</li>
                        <li>Calendar integration options</li>
                    </ul>
                </li>
                <li><strong>Customer Information:</strong>
                    <ul>
                        <li>Name and contact details</li>
                        <li>Service address (if applicable)</li>
                        <li>Special instructions text field</li>
                        <li>"Edit Information" link</li>
                    </ul>
                </li>
                <li><strong>Price Breakdown:</strong>
                    <ul>
                        <li>Base service price</li>
                        <li>Additional options/add-ons</li>
                        <li>Service fees</li>
                        <li>Taxes</li>
                        <li>Discount/Promo code field</li>
                        <li>Total amount highlighted</li>
                    </ul>
                </li>
                <li><strong>Cancellation Policy:</strong>
                    <ul>
                        <li>Policy summary</li>
                        <li>Refund conditions</li>
                        <li>"View Full Policy" link</li>
                    </ul>
                </li>
                <li><strong>Terms Acceptance:</strong>
                    <ul>
                        <li>Terms of service checkbox</li>
                        <li>Privacy policy acknowledgment</li>
                        <li>Marketing communications opt-in</li>
                    </ul>
                </li>
                <li><strong>Action Buttons:</strong>
                    <ul>
                        <li>"Back" to service details</li>
                        <li>"Proceed to Payment" (primary CTA)</li>
                        <li>"Save for Later" option</li>
                    </ul>
                </li>
                <li><strong>Trust Badges:</strong> Secure booking, money-back guarantee, customer support</li>
            </ul>
        </div>

        <div class="section-card api-calls">
            <h2>API Calls</h2>
            <ul>
                <li><code>booking.create(bookingDetails)</code> - Create initial booking record</li>
                <li><code>booking.validateAvailability(serviceId, datetime)</code> - Verify slot is still available</li>
                <li><code>pricing.calculate(serviceId, options)</code> - Get final price calculation</li>
                <li><code>promos.validate(promoCode)</code> - Check and apply promo codes</li>
                <li><code>booking.saveForLater(bookingId)</code> - Save incomplete booking</li>
                <li><code>calendar.getIntegrationLink(booking)</code> - Generate calendar event links</li>
                <li><code>location.validateAddress(address)</code> - Verify service address</li>
            </ul>
        </div>

        <h2>User Interaction Flow</h2>
        <pre class="mermaid">
flowchart TD
    A[User Arrives from Service Detail] --> B[Load Booking Summary]
    B --> C[Display All Details]
    
    C --> D{User Action}
    
    D -->|Review Details| E[Verify Information]
    E --> F{All Correct?}
    F -->|Yes| G[Continue to Next Step]
    F -->|No| H[Edit Required Section]
    
    D -->|Edit Service| I[Return to Service Selection]
    
    D -->|Change DateTime| J[Open Date/Time Picker]
    J --> K[Select New Slot]
    K --> L[Validate Availability]
    L --> M{Available?}
    M -->|Yes| N[Update Booking]
    M -->|No| O[Show Alternative Slots]
    
    D -->|Edit Customer Info| P[Open Info Form]
    P --> Q[Update Details]
    Q --> R[Validate Information]
    
    D -->|Apply Promo| S[Enter Promo Code]
    S --> T[Validate Code]
    T --> U{Valid?}
    U -->|Yes| V[Update Pricing]
    U -->|No| W[Show Error Message]
    
    D -->|Add Instructions| X[Enter Special Requests]
    X --> Y[Save Instructions]
    
    D -->|Proceed to Payment| Z[Check Terms Acceptance]
    Z --> AA{Terms Accepted?}
    AA -->|Yes| AB[Create Booking Record]
    AB --> AC[Navigate to Payment]
    AA -->|No| AD[Show Terms Alert]
    
    D -->|Save for Later| AE[Save Booking State]
    AE --> AF[Show Confirmation]
    AF --> AG[Return to Home]
    
    D -->|Back| AH[Return to Service Detail]
    
    H --> AI[Make Changes]
    AI --> C
    
    O --> J
    
    style A fill:#ADD8E6,stroke:#333,stroke-width:2px
    style D fill:#FFD700,stroke:#333,stroke-width:2px
    style F fill:#FFD700,stroke:#333,stroke-width:2px
    style M fill:#FFD700,stroke:#333,stroke-width:2px
    style U fill:#FFD700,stroke:#333,stroke-width:2px
    style AA fill:#FFD700,stroke:#333,stroke-width:2px
    style AC fill:#C8E6C9,stroke:#333,stroke-width:2px
    style AG fill:#C8E6C9,stroke:#333,stroke-width:2px
    style AH fill:#C8E6C9,stroke:#333,stroke-width:2px
    style N fill:#90EE90,stroke:#333,stroke-width:2px
    style V fill:#90EE90,stroke:#333,stroke-width:2px
    style Y fill:#90EE90,stroke:#333,stroke-width:2px
    style AB fill:#90EE90,stroke:#333,stroke-width:2px
    style AF fill:#90EE90,stroke:#333,stroke-width:2px
</pre>

        <h2>State Management</h2>
        <ul>
            <li><strong>Booking State:</strong> Service details, date/time, customer info, special instructions</li>
            <li><strong>Pricing State:</strong> Base price, add-ons, discounts, taxes, total</li>
            <li><strong>Validation State:</strong> Field validation errors, availability status</li>
            <li><strong>UI State:</strong> Edit mode flags, loading states, error messages</li>
            <li><strong>Terms State:</strong> Acceptance status for each required agreement</li>
        </ul>

        <h2>Validation Rules</h2>
        <ul>
            <li><strong>Availability Check:</strong> Real-time verification that selected slot is still available</li>
            <li><strong>Address Validation:</strong> Ensure service location is within coverage area</li>
            <li><strong>Required Fields:</strong> All customer information fields must be complete</li>
            <li><strong>Terms Acceptance:</strong> Cannot proceed without accepting terms</li>
            <li><strong>Price Verification:</strong> Final price must match calculated amount</li>
        </ul>

        <h2>Error Handling</h2>
        <ul>
            <li><strong>Slot No Longer Available:</strong> Show alternative times with minimal friction</li>
            <li><strong>Invalid Promo Code:</strong> Clear error message with suggestions</li>
            <li><strong>Session Timeout:</strong> Save booking state and allow resume</li>
            <li><strong>Price Changes:</strong> Alert user if price has changed since selection</li>
        </ul>

        <div class="responsive-section">
            <h2>Responsive Design</h2>
            <div class="responsive-grid">
                <div>
                    <h3>📱 Mobile</h3>
                    <ul>
                        <li>Single column layout</li>
                        <li>Collapsible sections</li>
                        <li>Sticky price summary and CTA</li>
                        <li>Native date/time pickers</li>
                    </ul>
                </div>
                <div>
                    <h3>📱 Tablet</h3>
                    <ul>
                        <li>Two-column layout for details and summary</li>
                        <li>Side-by-side service and appointment info</li>
                    </ul>
                </div>
                <div>
                    <h3>💻 Desktop</h3>
                    <ul>
                        <li>Multi-column layout</li>
                        <li>Sticky sidebar with price summary</li>
                        <li>Inline editing capabilities</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>
</body>
</html>